@extends('admin.main')

@section('breadcrumb-links')
{% if model.parent != false %}
    <li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">
            {{ model.parent.plural }} <span class="caret"></span></a>
        <ul class="dropdown-menu" role="menu">
            <li><a href="{{ blade_url(model.parent) }}">{{ i('list') }} List</a></li>
            <li><a href="{{ blade_url(model.parent, 'create') }}">{{ i('+') }} Add</a></li>
        </ul>
    </li>
{% endif %}
<li class="dropdown"><a href="#" class="dropdown-toggle" data-toggle="dropdown">
        {{ model.plural }} <span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu">
        <li><a href="{{ blade_url(model) }}">{{ i('list') }} List</a></li>
        <li><a href="{{ blade_url(model, 'create') }}">{{ i('+') }} Add</a></li>
    </ul>
</li>
<li class="no-crumb pull-right"><a class="btn btn-default btn-xs" href="#">{{ i('destroy') }}<span class="hidden-xs"> trash</span></a>
<li class="no-crumb pull-right">&nbsp;</li>
<li class="no-crumb pull-right"><a class="btn btn-default btn-xs" href="{{ blade_url(model, 'create') }}">{{ i('+') }}
        <span class="hidden-xs"> add</span></a>
<li class="no-crumb">&nbsp;</li>
@stop

@section('content')

<div class="table-responsive">
    <table class="table table-striped table-condensed table-hover">

        {% for field in model.fields %}
            {% if field.sensitive == false %}
                <th>{{ field.human }}</th>
            {% endif %}
        {% endfor %}
        <th>Created At</th>
        <th>Updated At</th>
        <th></th>

        @foreach(${{ model.variables }} as ${{ model.variable }})

        <tr id="{{ '%s-index-{{ $%s->id }}'|format(model.variable, model.variable) }}">
            {% for field in model.fields %}
                {% if field.sensitive == false %}
                    {% filter inline %}

                    <td>

                        {% if field.parent != false %}
                            {% set parent_variable = '$%s->%s' | format(model.variable, field.parent.variable) %}
                            {{ '<a href="{{ URL::route(\'%s.show\', %s->id) }}">{{ %s }}</a>' | format(field.parent.route, parent_variable, parent_variable) }}
                        {% elseif field.type == 'text' %}
                            {{ '{{ substr($%s->%s, 0, 50) }}...' | format(model.variable, field.name) }}
                        {% elseif field.type == 'datetime' %}
                            {{ "{{ $%s->%s->format('n/j/y g:i a') }}" | format(model.variable, field.name) }}
                        {% else %}
                            {{ '{{ $%s->%s }}' | format(model.variable, field.name) }}
                        {% endif %}
                    </td>

                    {% endfilter %}

                {% endif %}
            {% endfor %}

            <td>{{ "{{ $%s->created_at->format('n/j/y g:i a') }}" | format(model.variable) }}</td>
            <td>{{ "{{ $%s->updated_at->format('n/j/y g:i a') }}" | format(model.variable) }}</td>

            <td>
                <a class="btn btn-default btn-xs" href="{{ blade_url(model, 'show') }}">{{ i('show') }}<span
                            class="hidden-xs"> OPEN</span></a>
            </td>

        </tr>

        @endforeach
    </table>

    {{ '{{ $%s->links() }}' | format(model.variables) }}

</div>

@stop